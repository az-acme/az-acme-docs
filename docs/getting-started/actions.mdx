---
sidebar_position: 2
title: GitHub Actions
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


A GitHub action has been created to allow simple integation into your existing pipelines. All actions that can be performed via the ```az-acme``` CLI can also be run using the GitHub Action.

A complete example of using the GitHub Action is shown below, including using the [azure/login@v1](https://github.com/marketplace/actions/azure-login) action for authentication.

```yaml
# File: .github/workflows/order-certificates.yml

on: [push] # change to schedule

name: order-certificates

env:
  AZ_ACME_ACC_EMAIL: acmi@azacme.dev
  AZ_ACME_SERVER_URI: https://acme-v02.api.letsencrypt.org/directory    
  AZ_ACME_KV_URI: https://<kvname>.vault.azure.net/    
  AZ_ACME_KV_ACC_SECRET_NAME: prod-lets-encrypt 
  AZ_ACME_AZURE_DNS_ZONE: /subscriptions/xxxxx/resourceGroups/xxxxxxx/providers/Microsoft.Network/dnszones/azacme.dev

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}

    # Register with provider if not already registered
    - uses: az-acme/actions@v1
      with:
        verb: register
        args: >- 
            --server ${{env.AZ_ACME_SERVER_URI}}
            --key-vault-uri ${{env.AZ_ACME_KV_URI}}
            --account-secret ${{env.AZ_ACME_KV_ACC_SECRET_NAME}}
            --email ${{env.AZ_ACME_ACC_EMAIL}}
            --agree-terms

    # Order certificate (only if new or close to expiry)
    - uses: az-acme/actions@v1
      with:
        verb: order
        args: >- 
            --server ${{env.AZ_ACME_SERVER_URI}}
            --key-vault-uri ${{env.AZ_ACME_KV_URI}}
            --account-secret ${{env.AZ_ACME_KV_ACC_SECRET_NAME}}
            --dns-zone ${{env.AZ_ACME_AZURE_DNS_ZONE}}
            --certificate sample-azacme-dev
            --subject sample.azacme.dev
            --sans sample01.azacme.dev sample02.azacme.dev
            
            
            
```
